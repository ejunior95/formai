{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from 'react';\nimport {\n  getFieldConfig,\n  validateValue,\n  type FormAIConfig,\n  type FormAIOptions\n} from '@ejunior95/formai-core';\n\ninterface UseAIFormReturn {\n  value: string;\n  setValue: (value: string) => void;\n  error: string | null;\n  validate: () => void;\n  loading: boolean;\n  config: FormAIConfig | null;\n}\n\nexport function useAIForm(userPrompt: string, options?: FormAIOptions): UseAIFormReturn {\n  const [config, setConfig] = useState<FormAIConfig | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const [value, setValue] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      try {\n        const fieldConfig = await getFieldConfig(userPrompt, options);\n        setConfig(fieldConfig);\n      } catch (e) {\n        console.error(\"Erro no useAIForm:\", e);\n        setError(\"Falha ao gerar o campo de IA.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [userPrompt, JSON.stringify(options)]);\n\n  const validate = useCallback(() => {\n    if (!config) return;\n\n    const errorMessage = validateValue(value, config);\n    setError(errorMessage);\n\n  }, [value, config]);\n\n  return {\n    value,\n    setValue,\n    error,\n    validate,\n    loading,\n    config\n  };\n}"],"names":["useState","useEffect","getFieldConfig","useCallback","validateValue"],"mappings":";;;;;AAmBM,SAAU,SAAS,CAAC,UAAkB,EAAE,OAAuB,EAAA;IACnE,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAGA,cAAQ,CAAsB,IAAI,CAAC;IAC/D,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAGA,cAAQ,CAAC,IAAI,CAAC;IAE5C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGA,cAAQ,CAAC,EAAE,CAAC;IACtC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGA,cAAQ,CAAgB,IAAI,CAAC;IAEvDC,eAAS,CAAC,MAAK;QACb,CAAC,YAAW;YACV,UAAU,CAAC,IAAI,CAAC;AAChB,YAAA,IAAI;gBACF,MAAM,WAAW,GAAG,MAAMC,yBAAc,CAAC,UAAU,EAAE,OAAO,CAAC;gBAC7D,SAAS,CAAC,WAAW,CAAC;YACxB;YAAE,OAAO,CAAC,EAAE;AACV,gBAAA,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC,CAAC;gBACtC,QAAQ,CAAC,+BAA+B,CAAC;YAC3C;oBAAU;gBACR,UAAU,CAAC,KAAK,CAAC;YACnB;QACF,CAAC,GAAG;AACN,IAAA,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AAEzC,IAAA,MAAM,QAAQ,GAAGC,iBAAW,CAAC,MAAK;AAChC,QAAA,IAAI,CAAC,MAAM;YAAE;QAEb,MAAM,YAAY,GAAGC,wBAAa,CAAC,KAAK,EAAE,MAAM,CAAC;QACjD,QAAQ,CAAC,YAAY,CAAC;AAExB,IAAA,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAEnB,OAAO;QACL,KAAK;QACL,QAAQ;QACR,KAAK;QACL,QAAQ;QACR,OAAO;QACP;KACD;AACH;;;;"}