{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["const API_URL = \"https://formai-iota.vercel.app/api/generate\";\n\n/**\n * FormAIConfig: Define a \"forma\" (Interface) da resposta da API.\n */\nexport interface FormAIConfig {\n  type: 'text' | 'select' | 'mask-text' | 'radio' | 'checkbox';\n  placeholder: string | null;\n  mask: string | null;\n  validation: {\n    required: boolean | null;\n    regex: string | null;\n    minLength: number | null;\n    maxLength: number | null;\n  };\n}\n\nexport interface FormAIOptions {\n  maskPatterns?: {\n    digit?: string;\n    letter?: string;\n  }\n}\n\n/**\n * Busca a configuração do campo a partir do prompt do usuário.\n * @param userPrompt O prompt do usuário descrevendo o campo\n * @param proxyUrl A URL do proxy da API (padrão: API_URL)\n * @returns A configuração do campo como um objeto FormAIConfig\n */\nexport async function getFieldConfig(\n  userPrompt: string,\n  options?: FormAIOptions,\n  proxyUrl: string = API_URL\n): Promise<FormAIConfig> {\n  try {\n    const body = {\n      userPrompt,\n      maskPatterns: options?.maskPatterns\n    };\n\n    const response = await fetch(proxyUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Erro na API do formAI: ${response.statusText}`);\n    }\n\n    const config: FormAIConfig = await response.json();\n    return config;\n\n  } catch (error: any) {\n    console.error(\"Erro ao buscar configuração do formAI:\", error);\n    throw new Error(`Falha ao contactar o proxy do formAI: ${error.message}`);\n  }\n}\n/**\n * Valida um valor com base na configuração do FormAI.\n * @param value O valor a validar\n * @param config A configuração do campo\n * @returns Uma string de erro ou null se for válido\n */\nexport function validateValue(value: string | undefined | null, config: FormAIConfig): string | null {\n  const { validation } = config;\n  const v = value || \"\"; // Trata null/undefined como string vazia\n\n  if (validation.required && v.trim() === \"\") {\n    return \"Este campo é obrigatório.\";\n  }\n\n  if (validation.minLength && v.length < validation.minLength) {\n    return `Deve ter no mínimo ${validation.minLength} caracteres.`;\n  }\n\n  if (validation.maxLength && v.length > validation.maxLength) {\n    return `Deve ter no máximo ${validation.maxLength} caracteres.`;\n  }\n\n  if (validation.regex && v.length > 0) {\n    const re = new RegExp(validation.regex);\n    if (!re.test(v)) {\n      return \"Formato inválido.\";\n    }\n  }\n\n  return null;\n}"],"names":[],"mappings":"AAAA,MAAM,OAAO,GAAG,6CAA6C;AAwB7D;;;;;AAKG;AACI,eAAe,cAAc,CAClC,UAAkB,EAClB,OAAuB,EACvB,QAAA,GAAmB,OAAO,EAAA;AAE1B,IAAA,IAAI;AACF,QAAA,MAAM,IAAI,GAAG;YACX,UAAU;YACV,YAAY,EAAE,OAAO,EAAE;SACxB;AAED,QAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,QAAQ,EAAE;AACrC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;AAC/C,YAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;AAC3B,SAAA,CAAC;AAEF,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;YAChB,MAAM,IAAI,KAAK,CAAC,CAAA,uBAAA,EAA0B,QAAQ,CAAC,UAAU,CAAA,CAAE,CAAC;QAClE;AAEA,QAAA,MAAM,MAAM,GAAiB,MAAM,QAAQ,CAAC,IAAI,EAAE;AAClD,QAAA,OAAO,MAAM;IAEf;IAAE,OAAO,KAAU,EAAE;AACnB,QAAA,OAAO,CAAC,KAAK,CAAC,wCAAwC,EAAE,KAAK,CAAC;QAC9D,MAAM,IAAI,KAAK,CAAC,CAAA,sCAAA,EAAyC,KAAK,CAAC,OAAO,CAAA,CAAE,CAAC;IAC3E;AACF;AACA;;;;;AAKG;AACG,SAAU,aAAa,CAAC,KAAgC,EAAE,MAAoB,EAAA;AAClF,IAAA,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM;AAC7B,IAAA,MAAM,CAAC,GAAG,KAAK,IAAI,EAAE,CAAC;IAEtB,IAAI,UAAU,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;AAC1C,QAAA,OAAO,2BAA2B;IACpC;AAEA,IAAA,IAAI,UAAU,CAAC,SAAS,IAAI,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE;AAC3D,QAAA,OAAO,CAAA,mBAAA,EAAsB,UAAU,CAAC,SAAS,cAAc;IACjE;AAEA,IAAA,IAAI,UAAU,CAAC,SAAS,IAAI,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE;AAC3D,QAAA,OAAO,CAAA,mBAAA,EAAsB,UAAU,CAAC,SAAS,cAAc;IACjE;IAEA,IAAI,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;QACpC,MAAM,EAAE,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC;QACvC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;AACf,YAAA,OAAO,mBAAmB;QAC5B;IACF;AAEA,IAAA,OAAO,IAAI;AACb;;;;"}